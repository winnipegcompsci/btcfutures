var BitMEX = require('bitmex');
var clc = require('cli-color');
var util = require('util');

var api_key = "e2BLYT3X0QMoOv9UCodFMyIZ";
var secret = "0fyVviSP7iLRUythPV8In2XcchgG4UKn9Ux_TSGNk-HJXBeR";

var public_client = new BitMEX();
var private_client = new BitMEX(api_key, secret);

/** 
 * Public Functions 
 */

public_client.getIndices(function(err, resp) {
    if(err) {
        handleError('getIndices', err);
    } else {
        handlePass('getIndices', resp);
    }
});

public_client.getActiveIndices(function(err, resp) {
    if(err) {
        handleError('getActiveIndices', err);
    } else {
        handlePass('getActiveIndices', resp);
    }
});
 


/** 
 * Private Functions 
 */

private_client.getOrders(function (err, resp) {
    if(err) {
        handleError('getOrders', err);
    } else {
        handlePass('getOrders', resp);
    }
}); 
 
private_client.placeOrder(function (err, resp) {
    if(err) {
        handleError('placeOrder', err);
    } else {
        handlePass('placeOrder', resp);
    }
}); 

private_client.cancelOrder(function (err, resp) {
    if(err) {
        handleError('cancelOrder', err);
    } else {
        handlePass('cancelOrder', resp);
    }
});

private_client.getTradeHistory(function (err, resp) {
    if(err) {
        handleError('getTradeHistory', err);
    } else {
        handlePass('getTradeHistory', resp);
    }
});

private_client.getPositions(function (err, resp) {
    if(err) {
        handleError('getPositions', err);
    } else {
        handlePass('getPositions', resp);
    }
});

private_client.getTrades(function (err, resp) {
    if(err) {
        handleError('getTrades', err);
    } else {
        handlePass('getTrades', resp);
    }
});


 
/**
 * Output Functions
 */
function handleError(functionName, err) {    
    console.log(clc.red('Error: [' + functionName + ']: \n\t%s'), err);
}

function handlePass(functionName, resp) {
    console.log(clc.green('Passed: [' + functionName + ']'));
}