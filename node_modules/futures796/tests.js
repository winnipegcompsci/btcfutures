var Futures796 = require('futures796');
var clc = require('cli-color');
var util = require('util');

var api_key = "9ff4f593-0fd9-aaf9-b09a-8e2b-6b2f449c";
var secret = "QVx4ZB572LlRqtl9eQzGxm5DEhvZFM0G5JIOrUi3QPQNlinzGoVHfhIg77U9";

var public_client = new Futures796();
var private_client = new Futures796(api_key, secret);

/** 
 * Public Functions 
 */
public_client.getTicker(function(err, resp) {
    if(err) {
        handleError('getTicker', err);
    } else {
        handlePass('getTicker', resp);
    }
});

public_client.getDepth(function(err, resp) {
    if(err) {
        handleError('getDepth', err);
    } else {
        handlePass('getDepth', resp);
    }
});

public_client.getTrades(function(err, resp) {
    if(err) {
        handleError('getTrades', err);
    } else {
        handlePass('getTrades', resp);
    }    
});

public_client.getSettlements(function(err, resp) {
    if(err) {
        handleError('getSettlements', err);
    } else {
        handlePass('getSettlements', resp);
    }
});


/** 
 * Private Functions
 */
 
private_client.getUserInfo(function(err, resp) {
    if(err) {
        handleError('getUserInfo', err);
    } else {
        handlePass('getUserInfo', resp);
    }
});

private_client.getUserBalance(function(err, resp) {
    if(err) {
        handleError('getUserBalance', err);
    } else {
        handlePass('getUserBalance', resp);
    }
});

private_client.getAssets(function(err, resp) {
    if(err) {
        handleError('getAssets', err);
    } else {
        handlePass('getAssets', resp);
    }
});

private_client.getOrders(function(err, resp) {
    if(err) {
        handleError('getOrders', err);
    } else {
        handlePass('getOrders', resp);
    }
});

private_client.getTradeRecords(function(err, resp) {
    if(err) {
        handleError('getTradeRecords', err);
    } else {
        handlePass('getTradeRecords', resp);
    }
});

private_client.getPositions(function(err, resp) {
    if(err) {
        handleError('getPositions', err);
    } else {
        handlePass('getPositions', resp);
    }
}); 

private_client.openBuy(function(err, resp) {
    if(err) {
        handleError('openBuy', err);
    } else {
        handlePass('openBuy', resp);
    }
}, 0.20, 1, 280.00, 'A');

private_client.closeBuy(function(err, resp) {
    if(err) {
        handleError('closeBuy', err);
    } else {
        handlePass('closeBuy', resp);
    }
}, 0.20, 1, 280.00, 'A');

private_client.openSell(function(err, resp) {
    if(err) {
        handleError('openSell', err);
    } else {
        handlePass('openSell', resp);
    }
}, 0.20, 1, 280.00, 'A');

private_client.closeSell(function(err, resp) {
    if(err) {
        handleError('closeSell', err);
    } else {
        handlePass('closeSell', resp);
    }
}, 0.20, 1, 280.00, 'A');

private_client.cancelOrder(function(err, resp) {
    if(err) {
        handleError('cancelOrder', err);
    } else {
        handlePass('cancelOrder', resp);
    }
}, 'buy', 12358);

private_client.cancelAll(function(err, resp) {
    if(err) {
        handleError('cancelAll', err);
    } else {
        handlePass('cancelAll', resp);
    }
}, 'buy');

 

/**
 * Output Functions
 */
function handleError(functionName, err) {    
    console.log(clc.red('Error: [' + functionName + ']: \n\t%s'), err);
}

function handlePass(functionName, resp) {
    console.log(clc.green('Passed: [' + functionName + ']'));
}